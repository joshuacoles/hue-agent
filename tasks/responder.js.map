{"version":3,"sources":["responder.es6"],"names":[],"mappings":";;AAAA;;AACA;;AAEA,YAAK,SAAL,CAAe,mBAAW;AACtB,QAAM,QAAQ,IAAI,MAAJ,CAAW,UAAzB;AACA,QAAM,OAAO,KAAK,KAAL,CAAW,IAAI,OAAJ,CAAY,QAAZ,EAAX,CAAb;AACA,QAAM,SAAS,MAAM,KAAN,CAAY,KAAK,IAAL,CAAU,KAAV,CAAgB,MAA5B,CAAf;;AAEA,QAAI,WAAW,OAAf,EAAwB;AACpB,yBAAK,KAAL,EAAY;AACR,kBAAM,oBAAM,KAAK,KAAX,CADE;AAER,kBAAM,KAAK;AAFH,SAAZ;AAIH,KALD,MAKO,IAAI,WAAW,KAAf,EAAsB;AACzB,yBAAK,KAAL,EAAY;AACR,gBAAI,kBAAI,KAAK,IAAT,CADI;AAER,kBAAM,KAAK;AAFH,SAAZ;AAIH;AACJ,CAhBD","file":"responder.js","sourcesContent":["import { fetch, put } from '../support/backend'\nimport { push, pull } from '../support/props'\n\npull.subscribe(message => {\n    const topic = msg.fields.routingKey;\n    const data = JSON.parse(msg.content.toString());\n    const method = topic.slice(data.meta.realm.length);\n\n    if (method === 'fetch') {\n        push(topic, {\n            data: fetch(data.query),\n            meta: data.meta\n        })\n    } else if (method === 'put') {\n        push(topic, {\n            ok: put(data.data),\n            meta: data.meta\n        })\n    }\n});\n"]}