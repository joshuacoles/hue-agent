{"version":3,"sources":["heartbeat.es6"],"names":[],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;AAEA,IAAM,QAAQ,aAAG,UAAH,CAAc,KAAd,CAAoB,CAApB,EAAuB,KAAvB,CAAd;AACA,IAAI,iBAAJ;;AAEA,MAAM,GAAN,CAAU;AAAA,WAAM,aAAG,UAAH,CAAc,WAAd,CAA0B,WAAI,MAAJ,EAA1B,CAAN;AAAA,CAAV;;AAEA,MAAM,SAAN,CAAgB,UAAC,KAAD,EAAW;AACvB,QAAI,0BAAK,KAAL,MAAgB,QAApB,EAA8B;AAC1B,mBAAW,0BAAK,KAAL,CAAX;AACA,yBAAK,WAAL,EAAkB,EAAE,YAAF,EAAlB;AACH;AACJ,CALD","file":"heartbeat.js","sourcesContent":["import Rx from 'rx'\nimport hash from 'object-hash'\nimport { api, push } from '../props'\n\nconst timer = Rx.Observable.timer(0, 60000);\nlet oldState;\n\ntimer.map(() => Rx.Observable.fromPromise(api.lights()));\n\ntimer.subscribe((state) => {\n    if (hash(state) !== oldState) {\n        oldState = hash(state);\n        push('heartbeat', { state });\n    }\n});\n"]}